<div class="template-detail-container">
  <div *ngIf="loading" class="loading-spinner">
    <div class="spinner-border" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>
  
  <div *ngIf="!loading && template" class="template-detail-content">
    <div class="template-detail-header">
      <button class="btn btn-sm btn-outline-secondary back-button" (click)="goBack()">
        <i class="fas fa-arrow-left"></i> Back to Templates
      </button>
      
      <div class="template-title">
        <h1>{{ template.name }}</h1>
        <span *ngIf="template.isPublic" class="badge badge-success">Public</span>
      </div>
      
      <div class="template-actions">
        <button class="btn btn-outline-secondary" (click)="editTemplate()">
          Edit Template
        </button>
        <button class="btn btn-primary" (click)="startWorkout()" [disabled]="startingWorkout">
          <span *ngIf="startingWorkout" class="spinner-border spinner-border-sm mr-1"></span>
          Start Workout
        </button>
      </div>
    </div>
    
    <div *ngIf="template.description" class="template-description">
      <p>{{ template.description }}</p>
    </div>
    
    <div class="template-stats">
      <div class="stat-item">
        <div class="stat-value">{{ getExerciseCount() }}</div>
        <div class="stat-label">Exercises</div>
      </div>
      
      <div class="stat-item">
        <div class="stat-value">{{ getTotalSets() }}</div>
        <div class="stat-label">Total Sets</div>
      </div>
      
      <div class="stat-item">
        <div class="stat-value">~{{ getEstimatedDuration() | number:'1.0-0' }}</div>
        <div class="stat-label">Est. Minutes</div>
      </div>
    </div>
    
    <div class="exercises-section">
      <h2>Exercises</h2>
      
      <div class="exercises-list">
        <div *ngFor="let exercise of template.exercises; let i = index" class="exercise-item">
          <div class="exercise-number">{{ i + 1 }}</div>
          
          <div class="exercise-details">
            <h3>{{ exercise.exercise.name }}</h3>
            
            <div class="exercise-meta">
              <span class="badge badge-primary">{{ exercise.exercise.muscleGroup | titlecase }}</span>
              <span class="badge badge-secondary">{{ exercise.exercise.movementType | titlecase }}</span>
              <span *ngIf="exercise.exercise.isCompound" class="badge badge-info">Compound</span>
            </div>
            
            <div class="exercise-prescription">
              <div class="prescription-item">
                <span class="prescription-label">Sets:</span>
                <span class="prescription-value">{{ exercise.sets }}</span>
              </div>
              
              <div class="prescription-item">
                <span class="prescription-label">Reps:</span>
                <span class="prescription-value">{{ exercise.reps }}</span>
              </div>
              
              <div class="prescription-item">
                <span class="prescription-label">Rest:</span>
                <span class="prescription-value">{{ exercise.restTime }}s</span>
              </div>
            </div>
            
            <p *ngIf="exercise.notes" class="exercise-notes">{{ exercise.notes }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div *ngIf="error" class="alert alert-danger mt-3">
    {{ error }}
  </div>
</div>
